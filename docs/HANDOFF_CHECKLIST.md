# Developer Handoff Checklist ‚Äî Autogenerated Audit Report

**Generated:** 2026-01-29  
**Repository:** eshop  
**Type:** Monorepo (Nx + pnpm workspaces)  
**Architecture:** Microservices (10 backend services + 3 frontend apps)

---

## Executive Summary

Monorepo with 13 apps (10 backend services, 3 Next.js UIs). Stack: MongoDB/Prisma, QPay payments, Redis, Kafka, ImageKit, SMTP. Deployed via Docker Compose behind Nginx with Let's Encrypt SSL. Three domains: nomadnet.shop, sellers.nomadnet.shop, admin.nomadnet.shop.

Environment template exists (`.env.example` + `docs/ENVIRONMENT.md`). docker-compose.production.yml uses env vars. Dockerfiles still have hardcoded Stripe keys.

Missing: GitHub Actions workflows (referenced but not in repo), database backup docs, README, centralized API docs. Needs transfer: QPay credentials, Docker Hub access, domain/DNS management, ImageKit account.

### Top 10 Must-Do Before Handoff

1. **üî¥ CRITICAL:** Rotate and securely transfer all secrets (QPay credentials, SMTP, ImageKit, Redis, MongoDB connection string)
2. **üî¥ CRITICAL:** Transfer Docker Hub account access or create new account and update `DOCKER_USERNAME` in all scripts
3. **üî¥ CRITICAL:** Document MongoDB connection string format and provide production database access
4. **üî¥ CRITICAL:** Transfer domain DNS management access (nomadnet.shop and subdomains)
5. **üü° HIGH:** Provide Let's Encrypt SSL certificate renewal procedures
6. **üü° HIGH:** Document QPay webhook URL configuration in QPay merchant dashboard
7. **üü° HIGH:** Create database backup/restore scripts and document procedure
8. **üü° HIGH:** Transfer or document ImageKit account credentials
9. **üü° HIGH:** Provide Redis connection string (if using managed Redis service)
10. **üü° HIGH:** Review `.env.example` template and fill in production values in `.env` file

---

## 1. Source Code

### Repository Structure
- [x] **Status:** FOUND
- **Evidence:** Root `package.json`, `nx.json`, `pnpm-workspace.yaml`
- **Notes:** Nx monorepo with pnpm workspaces
- **Owner/Where:** Repository root

### Applications & Packages

#### Backend Services (10 services)
- [x] **api-gateway** ‚Äî Express.js API gateway (port 8080)
  - **Location:** `apps/api-gateway/`
  - **Build:** `nx build api-gateway`
  - **Run:** `nx serve api-gateway`
  - **Evidence:** `apps/api-gateway/package.json`, `apps/api-gateway/src/main.ts`

- [x] **auth-service** ‚Äî Authentication service (port 6001)
  - **Location:** `apps/auth-service/`
  - **Build:** `nx build auth-service`
  - **Run:** `nx serve auth-service`
  - **Evidence:** `apps/auth-service/package.json`, `apps/auth-service/src/main.ts`

- [x] **product-service** ‚Äî Product management (port 6002)
  - **Location:** `apps/product-service/`
  - **Build:** `nx build product-service`
  - **Run:** `nx serve product-service`
  - **Evidence:** `apps/product-service/package.json`

- [x] **order-service** ‚Äî Order processing & QPay integration (port 6003)
  - **Location:** `apps/order-service/`
  - **Build:** `nx build order-service`
  - **Run:** `nx serve order-service`
  - **Evidence:** `apps/order-service/package.json`, `apps/order-service/src/payments/`

- [x] **seller-service** ‚Äî Seller management (port 6004)
  - **Location:** `apps/seller-service/`
  - **Build:** `nx build seller-service`
  - **Run:** `nx serve seller-service`
  - **Evidence:** `apps/seller-service/package.json`

- [x] **admin-service** ‚Äî Admin operations (port 6005)
  - **Location:** `apps/admin-service/`
  - **Build:** `nx build admin-service`
  - **Run:** `nx serve admin-service`
  - **Evidence:** `apps/admin-service/package.json`

- [x] **chatting-service** ‚Äî WebSocket chat service (port 6006)
  - **Location:** `apps/chatting-service/`
  - **Build:** `nx build chatting-service`
  - **Run:** `nx serve chatting-service`
  - **Evidence:** `apps/chatting-service/package.json`

- [x] **recommendation-service** ‚Äî Product recommendations (port 6007)
  - **Location:** `apps/recommendation-service/`
  - **Build:** `nx build recommendation-service`
  - **Run:** `nx serve recommendation-service`
  - **Evidence:** `apps/recommendation-service/package.json`

- [x] **logger-service** ‚Äî Logging service (port 6008)
  - **Location:** `apps/logger-service/`
  - **Build:** `nx build logger-service`
  - **Run:** `nx serve logger-service`
  - **Evidence:** `apps/logger-service/package.json`

- [x] **kafka-service** ‚Äî Kafka consumer for analytics (no HTTP port)
  - **Location:** `apps/kafka-service/`
  - **Build:** `nx build kafka-service`
  - **Run:** `nx serve kafka-service`
  - **Evidence:** `apps/kafka-service/package.json`, `apps/kafka-service/src/services/analytics.service.ts`

#### Frontend Applications (3 Next.js apps)
- [x] **user-ui** ‚Äî Customer-facing e-commerce UI (port 3000)
  - **Location:** `apps/user-ui/`
  - **Build:** `nx build user-ui` or `pnpm --filter user-ui build`
  - **Run:** `pnpm --filter user-ui dev`
  - **Production:** `cd apps/user-ui && npx next start -p 3000`
  - **Evidence:** `apps/user-ui/package.json`, `apps/user-ui/next.config.js`

- [x] **seller-ui** ‚Äî Seller dashboard UI (port 3001)
  - **Location:** `apps/seller-ui/`
  - **Build:** `nx build seller-ui` or `pnpm --filter seller-ui build`
  - **Run:** `pnpm --filter seller-ui dev`
  - **Production:** `cd apps/seller-ui && npx next start -p 3001`
  - **Evidence:** `apps/seller-ui/package.json`

- [x] **admin-ui** ‚Äî Admin panel UI (port 3002)
  - **Location:** `apps/admin-ui/`
  - **Build:** `nx build admin-ui` or `pnpm --filter admin-ui build`
  - **Run:** `pnpm --filter admin-ui dev`
  - **Production:** `cd apps/admin-ui && npx next start -p 3002`
  - **Evidence:** `apps/admin-ui/package.json`

#### Shared Packages
- [x] **@packages/libs/prisma** ‚Äî Prisma client wrapper
  - **Location:** `packages/libs/prisma/`
  - **Evidence:** `packages/libs/prisma/index.ts`

- [x] **@packages/libs/redis** ‚Äî Redis client wrapper
  - **Location:** `packages/libs/redis/`
  - **Evidence:** `packages/libs/redis/index.ts`

- [x] **@packages/libs/imagekit** ‚Äî ImageKit SDK wrapper
  - **Location:** `packages/libs/imagekit/`
  - **Evidence:** `packages/libs/imagekit/index.ts`

- [x] **@packages/libs/env-loader** ‚Äî Environment variable loader
  - **Location:** `packages/libs/env-loader/`
  - **Evidence:** `packages/libs/env-loader/src/index.ts`

- [x] **@packages/middleware** ‚Äî Express middleware (auth, etc.)
  - **Location:** `packages/middleware/`
  - **Evidence:** `packages/middleware/isAuthenticated.ts`

- [x] **@packages/error-handler** ‚Äî Error handling middleware
  - **Location:** `packages/error-handler/`
  - **Evidence:** `packages/error-handler/error-middleware.ts`

- [x] **@packages/utils** ‚Äî Utility functions (Kafka, logs)
  - **Location:** `packages/utils/`
  - **Evidence:** `packages/utils/kafka/index.ts`

- [x] **@packages/components** ‚Äî Shared React components
  - **Location:** `packages/components/`
  - **Evidence:** `packages/components/package.json`

### Build & Run Commands

#### Development
```bash
# Install dependencies
pnpm install

# Run all services (dev mode)
pnpm dev

# Run specific UI
pnpm user-ui      # User UI only
pnpm seller-ui    # Seller UI only
pnpm admin-ui     # Admin UI only

# Run Kafka infrastructure
pnpm kafka:dev:up    # Start Kafka + Zookeeper
pnpm kafka:dev:down  # Stop Kafka + Zookeeper
```

#### Production Build
```bash
# Build all apps
pnpm build

# Build specific app
nx build <app-name>
# or
pnpm --filter <app-name> build
```

#### Production Run
```bash
# Start all backend services + UIs
pnpm start:prod

# Docker-based production
pnpm docker:prod      # Build and run
pnpm docker:build    # Build only
pnpm docker:run      # Run only
pnpm docker:stop     # Stop
pnpm docker:clean    # Clean up
pnpm docker:logs     # View logs
```

### Git Configuration
- [x] **Status:** FOUND
- **Evidence:** `.gitignore` file exists
- **Notes:** 
  - `.gitignore` properly excludes `.env*` files
  - Excludes `node_modules`, `dist`, `.next`, `out`
  - Excludes `eshop-demo-key.pem` (potential security concern if this was committed)
- **Owner/Where:** Repository root

### Submodules & Dependencies
- [x] **Status:** NOT FOUND
- **Notes:** No git submodules detected. All dependencies managed via pnpm.

### Scripts & Automation
- [x] **Status:** FOUND
- **Evidence:** `scripts/` directory contains:
  - `build-and-push-all.sh` ‚Äî Build and push all Docker images
  - `build-and-push.sh` ‚Äî Build and push single service
  - `deploy-production.sh` ‚Äî Production deployment script
  - `local-production.sh` ‚Äî Local Docker Compose production setup
  - `setup-dockerhub.sh` ‚Äî Docker Hub setup helper
  - `pull-and-deploy.sh` ‚Äî Pull images and deploy
  - `test-qpay-*.sh` ‚Äî QPay integration test scripts
- **Owner/Where:** `scripts/` directory

### Other Repositories
- [ ] **Status:** NEEDS VERIFICATION
- **Notes:** This audit covers only `eshop`. Other repos may exist in the G3 Global ecosystem.
- **Potential Repositories to Verify:**
  - [ ] **NomadShop** ‚Äî NOT FOUND
    - **How to Verify:** Check `g3globalmarket` org for "NomadShop" repo
    - **Action Required:** List URL and transfer access if exists
  - [ ] **E-Shop** ‚Äî NOT FOUND
    - **How to Verify:** Check `g3globalmarket` org for "E-Shop" or "eshop" repo
    - **Action Required:** List URL and transfer access if exists
  - [ ] **BuyPhones** ‚Äî NOT FOUND
    - **How to Verify:** Check `g3globalmarket` org for "BuyPhones" repo
    - **Action Required:** List URL and transfer access if exists
  - [ ] **G3 Agency** ‚Äî NOT FOUND
    - **How to Verify:** Check `g3globalmarket` org for "G3 Agency" or "g3-agency" repo
    - **Action Required:** List URL and transfer access if exists
  - [ ] **ImageProgram** ‚Äî NOT FOUND
    - **How to Verify:** Check `g3globalmarket` org for "ImageProgram" or "image-program" repo
    - **Action Required:** List URL and transfer access if exists
  - [ ] **Other Repositories** ‚Äî NEEDS VERIFICATION
    - **How to Verify:** 
      1. Log into `g3globalmarket` org
      2. List all repos
      3. Identify related repos
      4. Document names, URLs, purposes
    - **Action Required:** Provide complete list of related repos

### GitHub Organization Access
- [ ] **Status:** NEEDS TRANSFER
- **Organization:** g3globalmarket
- **Required Actions:**
  - [ ] **Grant Admin Access** to g3globalmarket org
    - **How to Verify:** 
      1. Admin logs into GitHub
      2. Go to `https://github.com/organizations/g3globalmarket/settings/members`
      3. Add new member with Admin role
      4. New member logs in and confirms org visibility
    - **Action Required:** Grant admin access
  - [ ] **List GitHub Accounts with Access**
    - **How to Verify:**
      1. Go to `https://github.com/organizations/g3globalmarket/people`
      2. Export members and roles
      3. Document: Username, Role, Access Level
    - **Action Required:** Provide list of accounts with org access
    - **Format:**
      ```
      | GitHub Username | Role | Access Level | Notes |
      |----------------|------|--------------|-------|
      | [REDACTED] | Admin | Full | Current developer |
      | [REDACTED] | Member | Read | ... |
      ```
  - [ ] **Repository Access Audit**
    - **How to Verify:** For each repo, list who has access
    - **Action Required:** Document repo-level permissions

---

## 2. Environment Variables & Keys

### Environment File Structure
- [x] **Status:** FOUND
- **Evidence:** 
  - `.env.example` at repository root
  - `.gitignore:13` allows `.env.example` with `!/.env.example`
  - Services load from repo root `.env` via `@packages/libs/env-loader`
- **Notes:** Template has all env var names with comments. See `docs/ENVIRONMENT.md` for details.
- **Owner/Where:** Repository root (`.env.example`)

### Consolidated Environment Variables

#### Database (MongoDB)
- [x] **DATABASE_URL**
  - **Type:** Required
  - **Usage:** Prisma connection string
  - **Location:** `prisma/schema.prisma:8`, all service `main.ts` files
  - **Format:** `mongodb://[username:password@]host[:port]/database[?options]`
  - **Owner/Where:** MongoDB Atlas or self-hosted MongoDB

#### Redis
- [x] **REDIS_DATABASE_URI** (primary)
- [x] **REDIS_URL** (fallback)
- [x] **REDIS_URI** (fallback)
- [x] **REDIS_HOST** + **REDIS_PORT** (fallback, defaults: localhost:6379)
  - **Type:** Optional (with fallbacks)
  - **Usage:** QPay token caching, session storage
  - **Location:** `packages/libs/redis/index.ts:5-25`
  - **Format:** `redis://[password@]host[:port][/database]`
  - **Owner/Where:** Redis instance (Upstash, AWS ElastiCache, or self-hosted)

#### QPay Payment Gateway
- [x] **QPAY_BASE_URL**
  - **Type:** Optional (default: `https://merchant.qpay.mn`)
  - **Usage:** QPay API base URL
  - **Location:** `apps/order-service/src/payments/qpay-auth.service.ts:36`, `qpay.client.ts:75`
  - **Notes:** Production: `https://merchant.qpay.mn`, Sandbox: `https://merchant-sandbox.qpay.mn`

- [x] **QPAY_USERNAME** (primary) or **QPAY_USER** or **QPAY_MERCHANT_USERNAME** or **QPAY_CLIENT_ID**
  - **Type:** Required for QPay
  - **Usage:** QPay merchant username/client ID
  - **Location:** `apps/order-service/src/payments/qpay-auth.service.ts:40-45`
  - **Owner/Where:** QPay merchant account

- [x] **QPAY_PASSWORD** (primary) or **QPAY_PASS** or **QPAY_CLIENT_SECRET**
  - **Type:** Required for QPay
  - **Usage:** QPay merchant password/client secret
  - **Location:** `apps/order-service/src/payments/qpay-auth.service.ts:46-50`
  - **Owner/Where:** QPay merchant account

- [x] **QPAY_INVOICE_CODE**
  - **Type:** Required for QPay
  - **Usage:** QPay invoice code for merchant
  - **Location:** `apps/order-service/src/payments/qpay.client.ts:76`
  - **Owner/Where:** QPay merchant account

- [x] **QPAY_USD_TO_MNT_RATE**
  - **Type:** Optional (default: `3400`)
  - **Usage:** USD to Mongolian Tugrik conversion rate
  - **Location:** `apps/order-service/src/payments/qpay.client.ts:103`

- [x] **QPAY_CALLBACK_PUBLIC_BASE_URL**
  - **Type:** Optional (default: `http://localhost:8080`)
  - **Usage:** Public base URL for QPay webhook callbacks
  - **Location:** `apps/order-service/src/payments/qpay.client.ts:164`
  - **Notes:** Should be `https://nomadnet.shop` in production

- [x] **QPAY_WEBHOOK_SECRET**
  - **Type:** Optional (for webhook verification)
  - **Usage:** Secret for validating QPay webhook signatures
  - **Location:** `apps/api-gateway/src/(routes)/qpay.ts:22`
  - **Owner/Where:** QPay merchant dashboard configuration

#### ImageKit (Image Storage/CDN)
- [x] **IMAGEKIT_PUBLIC_KEY**
  - **Type:** Required for image uploads
  - **Usage:** ImageKit public API key
  - **Location:** `packages/libs/imagekit/index.ts:14`

- [x] **IMAGEKIT_SECRET_KEY**
  - **Type:** Required for image uploads
  - **Usage:** ImageKit private API key
  - **Location:** `packages/libs/imagekit/index.ts:15`

- [x] **IMAGEKIT_URL_ENDPOINT**
  - **Type:** Optional (default: `https://ik.imagekit.io/gglobal`)
  - **Usage:** ImageKit URL endpoint
  - **Location:** `packages/libs/imagekit/index.ts:31`
  - **Owner/Where:** ImageKit account dashboard

#### Email (SMTP)
- [x] **SMTP_HOST**
  - **Type:** Required for email
  - **Usage:** SMTP server hostname
  - **Location:** `apps/auth-service/src/utils/sendMail/index.ts:9`, `apps/order-service/src/utils/send-email/index.ts:9`

- [x] **SMTP_PORT**
  - **Type:** Optional (default: `587`)
  - **Usage:** SMTP server port
  - **Location:** `apps/auth-service/src/utils/sendMail/index.ts:10`, `apps/order-service/src/utils/send-email/index.ts:10`

- [x] **SMTP_SERVICE**
  - **Type:** Optional
  - **Usage:** SMTP service name (e.g., "gmail", "sendgrid")
  - **Location:** `apps/auth-service/src/utils/sendMail/index.ts:11`, `apps/order-service/src/utils/send-email/index.ts:11`

- [x] **SMTP_USER**
  - **Type:** Required for email
  - **Usage:** SMTP authentication username
  - **Location:** `apps/auth-service/src/utils/sendMail/index.ts:13`, `apps/order-service/src/utils/send-email/index.ts:13`

- [x] **SMTP_PASS**
  - **Type:** Required for email
  - **Usage:** SMTP authentication password
  - **Location:** `apps/auth-service/src/utils/sendMail/index.ts:14`, `apps/order-service/src/utils/send-email/index.ts:14`
  - **Owner/Where:** Email service provider (Gmail, SendGrid, etc.)

#### Kafka
- [x] **KAFKA_BROKERS**
  - **Type:** Required for event streaming
  - **Usage:** Comma-separated Kafka broker addresses
  - **Location:** `packages/utils/kafka/index.ts`, `docker-compose.production.yml:90`
  - **Format:** `kafka:9092` (Docker) or `localhost:9092` (local)
  - **Notes:** In Docker, uses service name `kafka:9092`

#### Docker & Deployment
- [x] **DOCKER_USERNAME**
  - **Type:** Required for Docker builds
  - **Usage:** Docker Hub username for image registry
  - **Location:** `docker-compose.production.yml:85`, `scripts/deploy-production.sh:30`
  - **Owner/Where:** Docker Hub account

- [x] **NODE_ENV**
  - **Type:** Optional (default: development)
  - **Usage:** Environment mode (production/development)
  - **Location:** All service `main.ts` files, `docker-compose.production.yml`

- [x] **SERVICE_URL_MODE**
  - **Type:** Optional
  - **Usage:** Service URL resolution mode (`local` | `docker` | unset)
  - **Location:** `apps/api-gateway/src/(routes)/qpay.ts:31`
  - **Notes:** Controls whether services use `localhost` or Docker service names

#### Frontend (Next.js Public Variables)
- [x] **NEXT_PUBLIC_SERVER_URI**
  - **Type:** Required for user-ui
  - **Usage:** Public API server URL
  - **Location:** `docker-compose.production.yml:318`, `apps/user-ui/Dockerfile`
  - **Value:** `https://nomadnet.shop` (production)

- [x] **NEXT_PUBLIC_CHATTING_WEBSOCKET_URI**
  - **Type:** Required for user-ui
  - **Usage:** WebSocket URL for chat
  - **Location:** `docker-compose.production.yml:319`
  - **Value:** `wss://nomadnet.shop/ws-chatting` (production)

- [x] **NEXT_PUBLIC_SELLER_SERVER_URI**
  - **Type:** Required for user-ui
  - **Usage:** Seller UI URL
  - **Location:** `docker-compose.production.yml:320`, `apps/user-ui/src/configs/constants.tsx:26`
  - **Value:** `https://sellers.nomadnet.shop` (production)

- [x] **NEXT_PUBLIC_STRIPE_PUBLIC_KEY**
  - **Type:** Optional (Stripe integration)
  - **Usage:** Stripe publishable key
  - **Location:** `docker-compose.production.yml:321`, `apps/user-ui/Dockerfile:60`
  - **Notes:** docker-compose.production.yml uses `${NEXT_PUBLIC_STRIPE_PUBLIC_KEY:-}`. Dockerfile still hardcoded (needs build args).
  - **Value:** `[REDACTED]` (test key)
  - **Owner/Where:** Stripe account dashboard

#### Debug/Development
- [x] **ENV_LOADER_DEBUG**
  - **Type:** Optional
  - **Usage:** Enable debug logging for env-loader
  - **Location:** `packages/libs/env-loader/src/index.ts:81`
  - **Value:** `true` to enable

### Environment Variable Summary Table

| Category | Variable Name | Required | Default | Used By |
|----------|--------------|----------|---------|---------|
| **Database** | `DATABASE_URL` | ‚úÖ Yes | - | All services |
| **Redis** | `REDIS_DATABASE_URI` | ‚ö†Ô∏è Optional* | - | QPay auth, sessions |
| **QPay** | `QPAY_BASE_URL` | ‚ö†Ô∏è Optional | `https://merchant.qpay.mn` | order-service |
| **QPay** | `QPAY_USERNAME` | ‚úÖ Yes | - | order-service |
| **QPay** | `QPAY_PASSWORD` | ‚úÖ Yes | - | order-service |
| **QPay** | `QPAY_INVOICE_CODE` | ‚úÖ Yes | - | order-service |
| **QPay** | `QPAY_USD_TO_MNT_RATE` | ‚ö†Ô∏è Optional | `3400` | order-service |
| **QPay** | `QPAY_CALLBACK_PUBLIC_BASE_URL` | ‚ö†Ô∏è Optional | `http://localhost:8080` | order-service |
| **QPay** | `QPAY_WEBHOOK_SECRET` | ‚ö†Ô∏è Optional | - | api-gateway |
| **ImageKit** | `IMAGEKIT_PUBLIC_KEY` | ‚úÖ Yes** | - | product-service, auth-service |
| **ImageKit** | `IMAGEKIT_SECRET_KEY` | ‚úÖ Yes** | - | product-service, auth-service |
| **ImageKit** | `IMAGEKIT_URL_ENDPOINT` | ‚ö†Ô∏è Optional | `https://ik.imagekit.io/gglobal` | product-service, auth-service |
| **Email** | `SMTP_HOST` | ‚úÖ Yes** | - | auth-service, order-service |
| **Email** | `SMTP_PORT` | ‚ö†Ô∏è Optional | `587` | auth-service, order-service |
| **Email** | `SMTP_SERVICE` | ‚ö†Ô∏è Optional | - | auth-service, order-service |
| **Email** | `SMTP_USER` | ‚úÖ Yes** | - | auth-service, order-service |
| **Email** | `SMTP_PASS` | ‚úÖ Yes** | - | auth-service, order-service |
| **Kafka** | `KAFKA_BROKERS` | ‚úÖ Yes | - | All backend services |
| **Docker** | `DOCKER_USERNAME` | ‚úÖ Yes | - | Build scripts, docker-compose |
| **Frontend** | `NEXT_PUBLIC_SERVER_URI` | ‚úÖ Yes | - | user-ui |
| **Frontend** | `NEXT_PUBLIC_CHATTING_WEBSOCKET_URI` | ‚úÖ Yes | - | user-ui |
| **Frontend** | `NEXT_PUBLIC_SELLER_SERVER_URI` | ‚úÖ Yes | - | user-ui |
| **Frontend** | `NEXT_PUBLIC_STRIPE_PUBLIC_KEY` | ‚ö†Ô∏è Optional | - | user-ui |

\* Redis has multiple fallback options (REDIS_URL, REDIS_URI, REDIS_HOST+REDIS_PORT)  
\*\* Required only if feature is used (image uploads, email sending)

---

## 3. Database

### Database Type & Connection
- [x] **Status:** FOUND
- **Database:** MongoDB
- **ORM:** Prisma
- **Connection String:** `DATABASE_URL` environment variable
- **Evidence:** `prisma/schema.prisma:6-9`
- **Format:** `mongodb://[username:password@]host[:port]/database[?options]`
- **Owner/Where:** MongoDB Atlas or self-hosted MongoDB instance

### Database Schema
- [x] **Status:** FOUND
- **Location:** `prisma/schema.prisma`
- **Models Found:**
  - `users` ‚Äî User accounts
  - `sellers` ‚Äî Seller accounts
  - `shops` ‚Äî Shop/store information
  - `products` ‚Äî Product catalog
  - `orders` ‚Äî Order records
  - `orderItems` ‚Äî Order line items
  - `images` ‚Äî Image metadata
  - `address` ‚Äî User shipping addresses
  - `discount_codes` ‚Äî Coupon codes
  - `notifications` ‚Äî User notifications
  - `conversationGroup` ‚Äî Chat conversations
  - `participant` ‚Äî Chat participants
  - `message` ‚Äî Chat messages
  - `userAnalytics` ‚Äî User behavior analytics
  - `productAnalytics` ‚Äî Product analytics
  - `shopAnalytics` ‚Äî Shop analytics
  - `uniqueShopVisitors` ‚Äî Shop visitor tracking
  - `site_config` ‚Äî Site configuration
  - `QPayWebhookEvent` ‚Äî QPay webhook event log
  - `QPayProcessedInvoice` ‚Äî QPay invoice processing log
  - `QPayPaymentSession` ‚Äî QPay payment session data
- **Notes:** Schema uses MongoDB ObjectId for primary keys

### Migration & Seed Scripts
- [ ] **Status:** NEEDS VERIFICATION
- **Evidence:** 
  - `seed.json` file exists in root
  - `package.json` has `postinstall: "pnpm exec prisma generate"`
- **Notes:** 
  - Prisma migrations not explicitly found (may use `prisma db push` for MongoDB)
  - Seed file exists but no seed script found in package.json
- **Action Required:** 
  - Verify migration strategy (MongoDB typically uses `prisma db push`)
  - Create seed script if needed: `npx prisma db seed`

### Database Backup & Restore
- [ ] **Status:** NOT FOUND
- **Notes:** No backup/restore scripts or documentation found
- **Action Required:** 
  - Document MongoDB backup procedure (mongodump/mongorestore)
  - Create backup script if using MongoDB Atlas (use Atlas backup feature)
  - Document restore procedure

### Database Access
- [ ] **Status:** NEEDS VERIFICATION
- **Notes:** 
  - Connection string format: `mongodb://[username:password@]host[:port]/database`
  - If using MongoDB Atlas: provide cluster connection string
  - If self-hosted: provide host, port, database name, credentials
- **Owner/Where:** MongoDB provider (Atlas account or server admin)

---

## 4. Cloud, Hosting & Domains

### Infrastructure Configuration

#### Docker & Containerization
- [x] **Status:** FOUND
- **Evidence:**
  - `docker-compose.production.yml` ‚Äî Production stack
  - `docker-compose.dev.yml` ‚Äî Development stack
  - `docker-compose.override.yml` ‚Äî Override config
  - `docker-compose.nginx-override.yml` ‚Äî Nginx-specific overrides
  - Individual `Dockerfile` in each app directory
- **Services Containerized:**
  - All 10 backend services
  - All 3 frontend apps
  - Nginx reverse proxy
  - Kafka + Zookeeper
- **Owner/Where:** Docker Hub registry (requires `DOCKER_USERNAME`)

#### Nginx Reverse Proxy
- [x] **Status:** FOUND
- **Location:** `nginx.conf`
- **Configuration:**
  - SSL/TLS with Let's Encrypt certificates
  - HTTP ‚Üí HTTPS redirect
  - Multiple server blocks for subdomains
  - WebSocket support for chat
  - Proxy pass to backend services
- **Domains Configured:**
  - `nomadnet.shop` (main user site)
  - `www.nomadnet.shop` (redirects to main)
  - `sellers.nomadnet.shop` (seller dashboard)
  - `admin.nomadnet.shop` (admin panel)
  - `sandbox.nomadnet.shop` (sandbox/testing)
- **SSL Certificates:**
  - Location: `/etc/letsencrypt/live/nomadnet.shop/`
  - Certificate: `fullchain.pem`
  - Private Key: `privkey.pem`
- **Owner/Where:** Let's Encrypt (automatic renewal via certbot)

#### Deployment Scripts
- [x] **Status:** FOUND
- **Evidence:** `scripts/deploy-production.sh`
- **Features:**
  - Validates docker-compose config
  - Pulls latest images
  - Deploys services with health checks
  - Verifies deployment via HTTPS endpoint
- **Owner/Where:** Production server (EC2, VPS, or cloud instance)

### Domains & DNS
- [x] **Status:** FOUND
- **Domains:**
  - `nomadnet.shop` ‚Äî Main domain
  - `sellers.nomadnet.shop` ‚Äî Seller subdomain
  - `admin.nomadnet.shop` ‚Äî Admin subdomain
  - `sandbox.nomadnet.shop` ‚Äî Sandbox subdomain
- **Evidence:** `nginx.conf:17,35,100,146,191`
- **DNS Requirements:**
  - A record for `nomadnet.shop` ‚Üí Server IP
  - A record for `www.nomadnet.shop` ‚Üí Server IP
  - A record for `sellers.nomadnet.shop` ‚Üí Server IP
  - A record for `admin.nomadnet.shop` ‚Üí Server IP
  - A record for `sandbox.nomadnet.shop` ‚Üí Server IP
- **Owner/Where:** Domain registrar (whoever manages DNS for nomadnet.shop)

### Hosting Platform
- [ ] **Status:** NEEDS VERIFICATION
- **Evidence:** 
  - Docker Compose suggests VPS/EC2/self-hosted
  - `scripts/ec2-user-data.sh` suggests AWS EC2
  - `scripts/deploy-production.sh` suggests manual deployment
- **Possible Platforms:**
  - AWS EC2 (evidence: `scripts/ec2-user-data.sh`)
  - DigitalOcean Droplet
  - Linode VPS
  - Self-hosted server
- **Action Required:** Verify hosting provider and provide server access

### Hardcoded URLs
- [x] **Status:** FOUND (partially fixed, some remain)
- **Evidence:**
  - ‚úÖ **FIXED:** `docker-compose.production.yml:318-321` ‚Äî Now uses `${NEXT_PUBLIC_*}` environment variables with fallback defaults
  - ‚ö†Ô∏è **REMAINS:** `apps/user-ui/src/configs/constants.tsx:26-28` ‚Äî Hardcoded seller URL fallback
  - ‚ö†Ô∏è **REMAINS:** `apps/user-ui/Dockerfile:57-60` ‚Äî Hardcoded NEXT_PUBLIC_* values (should use build args)
  - ‚ö†Ô∏è **REMAINS:** `apps/seller-ui/Dockerfile:57-60` ‚Äî Hardcoded NEXT_PUBLIC_* values (should use build args)
  - `nginx.conf` ‚Äî Hardcoded domain names (expected for nginx config)
- **Notes:** 
  - Most API calls use relative paths (good)
  - docker-compose.production.yml now uses environment variables ‚úÖ
  - Dockerfiles still have hardcoded values (should be updated to use build args)
- **Action Required:** Update Dockerfiles to use build args instead of hardcoded values

### CI/CD
- [ ] **Status:** PARTIALLY FOUND
- **Evidence:**
  - `CI_GHA_RUN_REPORT.md` ‚Äî References GitHub Actions
  - `CI_GHA_LAST_FAILED.log` ‚Äî GitHub Actions logs
  - No `.github/workflows/` directory found
- **Notes:**
  - CI/CD workflow files not present in repository
  - Logs suggest workflows exist but may be in different branch/repo
  - Workflows use Docker Hub authentication (`DOCKERHUB_USERNAME`, `DOCKERHUB_TOKEN`)
- **Action Required:** 
  - Locate GitHub Actions workflow files
  - Transfer GitHub repository access
  - Transfer GitHub Secrets (DOCKERHUB_USERNAME, DOCKERHUB_TOKEN, etc.)

---

## 5. Payment Gateways

### QPay Integration
- [x] **Status:** FOUND
- **Provider:** QPay (Mongolian payment gateway)
- **Integration Files:**
  - `apps/order-service/src/payments/qpay.client.ts` ‚Äî QPay API client
  - `apps/order-service/src/payments/qpay-auth.service.ts` ‚Äî Authentication service
  - `apps/order-service/src/payments/qpay-cleanup.service.ts` ‚Äî Cleanup service
  - `apps/order-service/src/payments/qpay-reconcile.service.ts` ‚Äî Reconciliation service
  - `apps/api-gateway/src/(routes)/qpay.ts` ‚Äî Webhook handler
- **Evidence:** Extensive QPay integration with invoice creation, payment checking, Ebarimt (e-receipt) support

### Bonum Payment Gateway
- [ ] **Status:** NOT FOUND
- **Evidence:** No "bonum" matches in codebase
- **How to Verify:**
  1. Check project docs/emails for Bonum mentions
  2. Check payment config in database/env vars
  3. Ask outgoing developer if Bonum was integrated/planned
- **Action Required:** If used, document integration, API keys, webhooks, merchant account. If not, confirm and mark "Not Applicable"

### StorePay Payment Gateway
- [ ] **Status:** NOT FOUND
- **Evidence:** No "storepay" or "store-pay" matches in codebase
- **How to Verify:**
  1. Check project docs/emails for StorePay mentions
  2. Check payment config in database/env vars
  3. Ask outgoing developer if StorePay was integrated/planned
- **Action Required:** If used, document integration, API keys, webhooks, merchant account. If not, confirm and mark "Not Applicable"

#### QPay Webhook Endpoints
- [x] **Status:** FOUND
- **Endpoints:**
  1. **POST `/payments/qpay/callback`** ‚Äî Legacy webhook (requires `QPAY_WEBHOOK_SECRET`)
     - **Location:** `apps/api-gateway/src/(routes)/qpay.ts:104`
     - **Auth:** Secret-based validation
     - **Notes:** Stores events in `QPayWebhookEvent` table, forwards to order-service
  2. **POST `/payments/qpay/webhook?sessionId=...&token=...`** ‚Äî Public webhook (token-based)
     - **Location:** `apps/api-gateway/src/(routes)/qpay.ts:403`
     - **Auth:** Query parameter token (`callbackToken` from payment session)
     - **Notes:** Public endpoint, no JWT required, forwards to order-service
  3. **POST `/api/payments/qpay/webhook?sessionId=...&token=...`** ‚Äî Order service webhook
     - **Location:** `apps/order-service/src/routes/order.route.ts:66`
     - **Auth:** Query parameter token validation
     - **Notes:** Final webhook handler that processes payment status

#### QPay Configuration
- [x] **Required Environment Variables:**
  - `QPAY_BASE_URL` ‚Äî API base URL (production: `https://merchant.qpay.mn`)
  - `QPAY_USERNAME` ‚Äî Merchant username
  - `QPAY_PASSWORD` ‚Äî Merchant password
  - `QPAY_INVOICE_CODE` ‚Äî Invoice code
  - `QPAY_CALLBACK_PUBLIC_BASE_URL` ‚Äî Public webhook URL (should be `https://nomadnet.shop`)
  - `QPAY_WEBHOOK_SECRET` ‚Äî Optional webhook secret for `/callback` endpoint
- **Owner/Where:** QPay merchant account dashboard

#### QPay Features
- [x] **Invoice Creation:** Creates QPay invoices with QR codes
- [x] **Payment Verification:** Checks payment status via API
- [x] **Ebarimt Integration:** Creates Mongolian e-receipts (Ebarimt) after payment
- [x] **Idempotency:** Prevents duplicate webhook processing
- [x] **Token Caching:** Redis-based token caching for API authentication
- [x] **Webhook Retry:** Stores failed webhooks for retry

#### QPay Webhook URL Configuration
- [ ] **Status:** NEEDS VERIFICATION
- **Notes:** 
  - QPay merchant dashboard must be configured with webhook URL
  - Public webhook: `https://nomadnet.shop/payments/qpay/webhook`
  - Legacy webhook: `https://nomadnet.shop/payments/qpay/callback` (if using secret)
- **Action Required:** 
  - Verify webhook URL in QPay merchant dashboard
  - Update if domain changes
  - Test webhook delivery

#### QPay Sandbox vs Production
- [x] **Status:** FOUND
- **Evidence:** 
  - `QPAY_BASE_URL` supports sandbox: `https://merchant-sandbox.qpay.mn`
  - Production: `https://merchant.qpay.mn`
- **Notes:** Switch via `QPAY_BASE_URL` environment variable

### Stripe Integration (Partial)
- [x] **Status:** FOUND (test keys only, integration incomplete)
- **Evidence:**
  - `docker-compose.production.yml:321` ‚Äî Stripe public key (test)
  - `apps/user-ui/Dockerfile:60` ‚Äî Stripe public key (test)
  - `prisma/schema.prisma:92` ‚Äî `stripeId` field in sellers table
  - `apps/seller-ui/src/assets/svgs/stripe-logo.tsx` ‚Äî Stripe logo component
- **Notes:**
  - Stripe integration appears to be in progress or deprecated
  - Only test keys found (no production keys)
  - Seller signup flow removed Stripe step (per `aaaa.txt`)
- **Action Required:** 
  - Verify if Stripe is still needed
  - If not needed, remove Stripe references
  - If needed, provide production Stripe keys and complete integration

---

## 6. Third-Party Service Accounts

### Payment Services
- [x] **QPay Merchant Account**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** QPay integration throughout codebase
  - **Required Access:**
    - Merchant username/password
    - Invoice code
    - Webhook configuration access
  - **Owner/Where:** QPay merchant dashboard

- [ ] **Stripe Account** (if still in use)
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** Test keys found, but integration incomplete
  - **Action Required:** Verify if Stripe is still needed

### Image Storage
- [x] **ImageKit Account**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** `packages/libs/imagekit/index.ts`
  - **Required Credentials:**
    - Public Key (`IMAGEKIT_PUBLIC_KEY`)
    - Private Key (`IMAGEKIT_SECRET_KEY`)
    - URL Endpoint (`IMAGEKIT_URL_ENDPOINT`)
  - **Owner/Where:** ImageKit dashboard

### Email Service
- [x] **SMTP Email Provider**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** `apps/auth-service/src/utils/sendMail/`, `apps/order-service/src/utils/send-email/`
  - **Required Credentials:**
    - SMTP Host (`SMTP_HOST`)
    - SMTP Port (`SMTP_PORT`)
    - SMTP Username (`SMTP_USER`)
    - SMTP Password (`SMTP_PASS`)
    - SMTP Service (`SMTP_SERVICE` - optional)
  - **Possible Providers:**
    - Gmail
    - SendGrid
    - AWS SES
    - Custom SMTP server
  - **Owner/Where:** Email service provider account

### Container Registry
- [x] **Docker Hub Account**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** `docker-compose.production.yml:85`, `scripts/deploy-production.sh:30`
  - **Required Access:**
    - Username (`DOCKER_USERNAME`)
    - Access Token/Password (for CI/CD)
  - **Owner/Where:** Docker Hub account

### Database Hosting
- [x] **MongoDB Provider**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** `prisma/schema.prisma`, `DATABASE_URL` env var
  - **Required Access:**
    - MongoDB Atlas account (if using Atlas)
    - Connection string
    - Database admin credentials
  - **Owner/Where:** MongoDB Atlas or self-hosted MongoDB admin

### Redis Hosting
- [x] **Redis Provider** (if using managed service)
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** `packages/libs/redis/index.ts`
  - **Required Access:**
    - Redis connection string (`REDIS_DATABASE_URI`)
    - Redis host/port/credentials (if self-hosted)
  - **Possible Providers:**
    - Upstash
    - AWS ElastiCache
    - Redis Cloud
    - Self-hosted
  - **Owner/Where:** Redis provider account or server admin

### Domain & DNS
- [x] **Domain Registrar**
  - **Status:** NEEDS TRANSFER
  - **Domains:** `nomadnet.shop` and subdomains
  - **Required Access:**
    - Domain registrar account
    - DNS management access
    - SSL certificate management (Let's Encrypt)
  - **Owner/Where:** Domain registrar (whoever registered nomadnet.shop)

#### Domain Registrar Details
- [ ] **Domain Registrar Login Credentials**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:** 
    1. Check WHOIS: `whois nomadnet.shop`
    2. Find registrar (Namecheap, GoDaddy, Cloudflare, etc.)
    3. Get login URL and account email
  - **Action Required:** Transfer registrar account access
  - **Owner/Where:** Domain registrar account holder

- [ ] **Domain Expiry Dates**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. `whois nomadnet.shop` (look for "Expiry Date")
    2. Or registrar panel ‚Üí Domain Management
  - **Action Required:** Document expiry dates:
    - `nomadnet.shop`: [REDACTED] (expires: YYYY-MM-DD)
    - Subdomains inherit main domain expiry
  - **Owner/Where:** Domain registrar panel

- [ ] **DNS Export/Screenshot**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. Registrar DNS panel
    2. Export zone file (`.zone` or `.txt`) or screenshot all records
  - **Action Required:** Export/screenshot all DNS records (A, AAAA, CNAME, MX, TXT, NS)
  - **Owner/Where:** Domain registrar DNS panel

#### Hosting Provider Details
- [ ] **Hosting Provider Credentials**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. Get server IP from DNS records
    2. Identify provider (AWS, DigitalOcean, Linode, etc.)
    3. Find provider account/login
  - **Action Required:** Transfer hosting provider account access
  - **Owner/Where:** Hosting provider account (AWS Console, DigitalOcean, etc.)

- [ ] **Server IP Addresses**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. `dig nomadnet.shop +short`
    2. Or hosting provider dashboard ‚Üí Servers
    3. Or SSH: `hostname -I` or `ip addr`
  - **Action Required:** Document server IPs:
    - Production: [REDACTED]
    - Backup (if any): [REDACTED]
  - **Owner/Where:** Hosting provider dashboard or DNS records

- [ ] **SSH Keys & Server Access**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. Check `~/.ssh/id_rsa`, `~/.ssh/id_ed25519`
    2. Hosting provider ‚Üí Access ‚Üí SSH Keys
    3. Server `/home/user/.ssh/authorized_keys`
  - **Action Required:**
    - Transfer SSH private keys securely (not email/repo)
    - Document key locations, passphrases, server username (`root`, `ubuntu`, `ec2-user`)
    - Document SSH command: `ssh [user]@[server-ip]`
  - **Owner/Where:** Developer `~/.ssh/` or hosting provider dashboard

#### SSL/TLS Certificates
- [ ] **SSL Provider**
  - **Status:** FOUND (Let's Encrypt)
  - **Evidence:** `nginx.conf:37,102,148,193` ‚Äî References `/etc/letsencrypt/live/nomadnet.shop/`
  - **Provider:** Let's Encrypt (free SSL certificates)
  - **Action Required:** Verify SSL certificate renewal process

- [ ] **SSL Certificate Expiry Dates**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. `openssl s_client -connect nomadnet.shop:443 -servername nomadnet.shop 2>/dev/null | openssl x509 -noout -dates`
    2. Or server: `sudo certbot certificates`
    3. Or `/etc/letsencrypt/live/nomadnet.shop/cert.pem`
  - **Action Required:** Document expiry:
    - `nomadnet.shop`: [REDACTED] (expires: YYYY-MM-DD)
    - Subdomains use same cert
  - **Owner/Where:** Server `/etc/letsencrypt/live/nomadnet.shop/` or certbot output

- [ ] **SSL Certificate Renewal Process**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. `sudo systemctl status certbot.timer`
    2. `sudo crontab -l` (check for certbot cron)
    3. `/etc/letsencrypt/renewal/nomadnet.shop.conf`
  - **Action Required:** Document renewal:
    - Auto-renewal: [ ] Yes [ ] No
    - Manual: `sudo certbot renew --nginx`
    - Reload: `sudo nginx -s reload`
  - **Owner/Where:** Server `/etc/letsencrypt/` and systemd/cron configs

#### Email Accounts Under Domains
- [ ] **Email Accounts**
  - **Status:** NEEDS VERIFICATION
  - **How to Verify:**
    1. Check email service config (Gmail, SendGrid, AWS SES, etc.)
    2. Registrar ‚Üí Email section (if using registrar email)
    3. Check for `admin@nomadnet.shop`, `support@nomadnet.shop`, etc.
  - **Action Required:** Document email accounts:
    - Account: [REDACTED]@nomadnet.shop
    - Provider: [REDACTED]
    - Credentials: [REDACTED] (transfer securely)
  - **Owner/Where:** Email provider account or registrar email section

### CI/CD
- [x] **GitHub Repository**
  - **Status:** NEEDS TRANSFER
  - **Evidence:** CI logs reference GitHub Actions
  - **Required Access:**
    - Repository access
    - GitHub Secrets (DOCKERHUB_USERNAME, DOCKERHUB_TOKEN, etc.)
    - GitHub Actions workflow access
  - **Owner/Where:** GitHub organization/account

### Monitoring & Analytics
- [ ] **Status:** NOT FOUND
- **Notes:** No external analytics (GA, GTM, Facebook Pixel). Internal analytics via Kafka. Grafana config: `dashboards/QPAY_OVERVIEW_GRAFANA.json`
- **Action Required:** Verify if external monitoring/analytics are used

### Google Analytics / Search Console
- [ ] **Google Analytics** ‚Äî NOT FOUND
  - **Status:** NOT FOUND
  - **Evidence:** No "google.*analytics", "gtag", "ga(", "gtm" matches in codebase
  - **How to Verify:**
    1. Check frontend `<head>` or `_app.tsx` for GA tracking code
    2. Look for `gtag.js` or `analytics.js` script tags
    3. Check env vars for `GA_TRACKING_ID`
    4. Ask outgoing developer if GA is used
  - **Action Required:** If used, document Tracking ID, property ID, account access. If not, mark "Not Applicable"

- [ ] **Google Search Console** ‚Äî NOT FOUND
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** Not in codebase
  - **How to Verify:**
    1. Check if domain verified in Search Console
    2. Ask outgoing developer if used
  - **Action Required:** If used, transfer Search Console access for `nomadnet.shop`. If not, mark "Not Applicable"

### Facebook Pixel / Business Manager
- [ ] **Facebook Pixel** ‚Äî NOT FOUND
  - **Status:** NOT FOUND
  - **Evidence:** No "facebook.*pixel" or "fbq" matches in codebase
  - **How to Verify:**
    1. Check frontend `<head>` for Pixel script
    2. Look for `fbq('init', ...)` calls
    3. Check env vars for `FB_PIXEL_ID`
    4. Ask outgoing developer if used
  - **Action Required:** If used, document Pixel ID, Business Manager access. If not, mark "Not Applicable"

### Error Monitoring (Sentry)
- [ ] **Sentry** ‚Äî NOT FOUND
  - **Status:** NOT FOUND
  - **Evidence:** No "sentry" matches in codebase
  - **How to Verify:**
    1. Check `package.json` for `@sentry/nextjs` or `@sentry/node`
    2. Check env vars for `SENTRY_DSN`
    3. Check code for `Sentry.init(...)`
    4. Ask outgoing developer if used
  - **Action Required:** If used, document DSN, project name, org access. If not, mark "Not Applicable"

### Proxy Services
- [ ] **Proxy Services** ‚Äî NOT FOUND
  - **Status:** NOT FOUND
  - **Evidence:** No proxy service integrations found
  - **How to Verify:**
    1. Check env vars for `PROXY_URL`, `SCRAPING_PROXY`
    2. Check `package.json` for proxy SDKs
    3. Ask outgoing developer if used for scraping/API calls
  - **Action Required:** If used, document provider, API keys, endpoints. If not, mark "Not Applicable"

### Captcha Services
- [ ] **Captcha Services** ‚Äî NOT FOUND
  - **Status:** NOT FOUND
  - **Evidence:** No "captcha", "recaptcha", "hcaptcha" matches in codebase
  - **How to Verify:**
    1. Check frontend forms for captcha widgets
    2. Check env vars for `RECAPTCHA_SITE_KEY`, `HCAPTCHA_SITE_KEY`
    3. Check backend for captcha verification endpoints
    4. Ask outgoing developer if used
  - **Action Required:** If used, document provider, site key, secret key, account access. If not, mark "Not Applicable"

### CI/CD Secrets & Tokens
- [x] **GitHub Actions Secrets** ‚Äî NEEDS TRANSFER
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** CI logs reference `DOCKERHUB_USERNAME` and `DOCKERHUB_TOKEN`
  - **How to Verify:**
    1. Repo ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
    2. List all repo secrets
    3. Org secrets: Organization ‚Üí Settings ‚Üí Secrets ‚Üí Actions
  - **Action Required:** Document and transfer GitHub Secrets:
    - `DOCKERHUB_USERNAME`: [REDACTED]
    - `DOCKERHUB_TOKEN`: [REDACTED]
    - Others: [List all]
  - **Owner/Where:** GitHub repo/org Settings ‚Üí Secrets

### Project Management Tools
- [ ] **Project Management Tools** ‚Äî NOT FOUND
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** Not in codebase
  - **How to Verify:**
    1. Check if uses Jira, Trello, Asana, Linear, Monday.com, etc.
    2. Ask outgoing developer
  - **Action Required:** If used, document tool name, workspace URL, account access. If not, mark "Not Applicable"

### Shared Drives / File Storage
- [ ] **Shared Drives** ‚Äî NOT FOUND
  - **Status:** NEEDS VERIFICATION
  - **Evidence:** Not in codebase
  - **How to Verify:**
    1. Check if uses Google Drive, Dropbox, OneDrive, etc.
    2. Ask outgoing developer
  - **Action Required:** If used, document location, credentials, folder structure. If not, mark "Not Applicable"

---

## 7. Design & Branding

### Design Assets
- [ ] **Status:** NEEDS VERIFICATION
- **Evidence:**
  - `qpay-qr.png` in root
  - `apps/seller-ui/src/assets/svgs/stripe-logo.tsx`
  - No centralized `/assets` or `/design` folder
- **Notes:** Assets may be in UI apps or Next.js `public/` directories
- **Action Required:** Verify locations, collect logos/fonts/colors, check for Figma links

### Brand Constants
- [x] **Status:** FOUND (partial)
- **Evidence:**
  - `apps/user-ui/src/configs/constants.tsx` ‚Äî Navigation items, URLs
  - Database `site_config` table
- **Notes:** Brand colors/fonts in Tailwind config or CSS. Logo/banner in `site_config` table.
- **Action Required:** Extract colors from Tailwind, document fonts, export logo/banner from DB if needed

### Fonts & Typography
- [ ] **Status:** NEEDS VERIFICATION
- **Notes:** Tailwind CSS used. Font config in `tailwind.config.js` or CSS.
- **Action Required:** Check Tailwind configs for font families

### Logos & Icons
- [x] **Status:** FOUND (partial)
- **Evidence:**
  - `apps/seller-ui/src/assets/svgs/stripe-logo.tsx` ‚Äî SVG component
  - `qpay-qr.png` ‚Äî QPay QR code example
- **Action Required:** Collect all logo files (PNG, SVG, ICO)

---

## 8. Documentation & Known Issues

### Existing Documentation
- [x] **Status:** FOUND (minimal)
- **Files Found:**
  - `LICENSE`
  - `areport.md`, `report2.md` ‚Äî Audit reports
  - `CI_GHA_RUN_REPORT.md`, `CI_GHA_LAST_FAILED.log` ‚Äî CI logs
  - `aaaa.txt` ‚Äî Implementation notes
- **Notes:** No README.md

### Missing Documentation
- [ ] **README.md** ‚Äî NOT FOUND
  - **Action Required:** Create README: overview, architecture, setup, dev workflow, deployment

- [ ] **API Documentation** ‚Äî PARTIALLY FOUND
  - **Evidence:** Swagger files exist (`apps/*/src/swagger-output.json`)
  - **Action Required:** Centralize API docs or provide Swagger UI endpoint

- [ ] **Database Schema Documentation** ‚Äî NOT FOUND
  - **Action Required:** Document database schema relationships

- [ ] **Deployment Guide** ‚Äî NOT FOUND
  - **Action Required:** Document production deployment steps

- [x] **Environment Variables Guide** ‚Äî FOUND
  - **Evidence:** `docs/ENVIRONMENT.md` (355 lines)
  - **Notes:** Quick reference table, variable docs, setup, troubleshooting

### Known Issues
- [x] **Status:** FOUND (from code analysis)
- **Issues Identified:**
  1. **Hardcoded Stripe test key** in Dockerfiles (docker-compose.production.yml ‚úÖ fixed - now uses env var)
  2. **GitHub Actions workflows missing** (referenced but not in repo)
  3. **Database backup procedures not documented**
  4. **QPay webhook URL needs verification** in merchant dashboard

### Architecture Overview
- [ ] **Status:** NOT FOUND
- **Action Required:** Document microservices architecture, service communication, Kafka event flow, DB relationships, API gateway routing

### Feature Status
- [x] **Status:** FOUND (from code analysis)
- **Features:**
  - ‚úÖ User authentication & registration
  - ‚úÖ Seller registration & shop creation
  - ‚úÖ Product management
  - ‚úÖ Order processing
  - ‚úÖ QPay payment integration
  - ‚úÖ Ebarimt (e-receipt) generation
  - ‚úÖ Real-time chat (WebSocket)
  - ‚úÖ Analytics tracking (Kafka-based)
  - ‚úÖ Image upload (ImageKit)
  - ‚úÖ Email notifications
  - ‚ö†Ô∏è Stripe integration (incomplete/test only)

---

## 9. Security (Critical)

### Secrets in Repository
- [x] **Status:** FOUND (test keys only, no production secrets)
- **Issues Found:**
  1. **Stripe test public key** hardcoded in:
     - ‚úÖ **FIXED:** `docker-compose.production.yml:321` ‚Äî Now uses `${NEXT_PUBLIC_STRIPE_PUBLIC_KEY:-}` environment variable
     - ‚ö†Ô∏è **REMAINS:** `apps/user-ui/Dockerfile:60` ‚Äî Still hardcoded (should use build args)
     - **Risk:** Low (test key only, but should use env var/build args)
     - **Action:** Update Dockerfiles to use build args instead of hardcoded values
  
  2. **Potential key file reference:**
     - `.gitignore:55` ‚Äî `eshop-demo-key.pem` (excluded, but verify if it was ever committed)
     - **Action:** Verify git history for any committed keys

### Environment Variables Security
- [x] **Status:** GOOD
- **Evidence:**
  - `.gitignore` excludes `.env*` files
  - Services use env vars (no hardcoded secrets)
  - Env loader loads from repo root `.env`

### Missing Security Measures
- [x] **.env.example file** ‚Äî FOUND
  - **Status:** ‚úÖ Created
  - **Evidence:** `.env.example` exists at repository root with all variable names documented
  - **Notes:** Template includes safe placeholders and documentation

- [ ] **Secrets rotation documentation** ‚Äî NOT FOUND
  - **Risk:** Medium
  - **Action:** Document rotation procedure for all secrets

### Hardcoded URLs & Credentials
- [x] **Status:** FOUND (minimal issues)
- **Issues:**
  1. **Hardcoded Stripe test key** (see above)
  2. **Hardcoded domain fallback** in `apps/user-ui/src/configs/constants.tsx:27`
     - **Risk:** Low (fallback only)
     - **Action:** Use env var for all URLs

### Security Best Practices
- [x] **Status:** MOSTLY GOOD
- **Good Practices:**
  - `.gitignore` excludes secrets
  - Env vars used for secrets
  - QPay webhook token auth
  - JWT auth for APIs
  - HTTPS via Nginx
  - Security headers in Nginx (CSP, HSTS)

### Rotation Needed List
- [ ] **QPay Credentials** ‚Äî Rotate for handoff
  - Variables: `QPAY_USERNAME`, `QPAY_PASSWORD`, `QPAY_INVOICE_CODE`
  - **Action:** Generate new in QPay dashboard, update `.env`

- [ ] **SMTP Credentials** ‚Äî Rotate for handoff
  - Variables: `SMTP_USER`, `SMTP_PASS`
  - **Action:** Update email provider, update `.env`

- [ ] **ImageKit Keys** ‚Äî Rotate for handoff
  - Variables: `IMAGEKIT_PUBLIC_KEY`, `IMAGEKIT_SECRET_KEY`
  - **Action:** Generate new in ImageKit dashboard, update `.env`

- [ ] **MongoDB Connection String** ‚Äî Rotate for handoff
  - Variable: `DATABASE_URL`
  - **Action:** Create new DB user, update connection string

- [ ] **Redis Connection String** ‚Äî Rotate for handoff
  - Variable: `REDIS_DATABASE_URI`
  - **Action:** Update Redis credentials, update connection string

- [ ] **Docker Hub Token** ‚Äî Rotate for handoff
  - **Action:** Generate new token, update GitHub Secrets

### Recommended Security Actions
1. **üî¥ CRITICAL:** Audit git history for committed secrets
   ```bash
   git log --all --full-history --source -- "*secret*" "*key*" "*password*" "*.env"
   ```

2. **üî¥ CRITICAL:** Rotate all production secrets before handoff (QPay, SMTP, ImageKit, MongoDB, Redis, Docker Hub)

3. **üü° HIGH:** Update Dockerfiles to use build args instead of hardcoded Stripe keys
4. **üü° HIGH:** Document secret rotation procedure

---

## 10. Delivery Format

### Repository Package
- [x] **Status:** READY
- **Format:** Git repository with full history
- **Location:** Current repository
- **Notes:** All source code present. Git history preserved. Consider release tag for handoff.

### Environment Variables Template
- [x] **Status:** READY
- **Evidence:** 
  - `.env.example` at repo root (209 lines)
  - `docs/ENVIRONMENT.md` (355 lines)
  - Template has all var names with comments and safe examples
- **Notes:** Organized by category. Secret values use placeholders. `.gitignore` allows `.env.example`.
- **Owner/Where:** Repository root (`.env.example`) and `docs/ENVIRONMENT.md`

### Credentials Secure Transfer
- [ ] **Status:** NEEDS ARRANGEMENT
- **Method:** Secure channel (not email, not in repo)
- **Options:** Password manager, encrypted file (GPG/7zip), secure file sharing, in-person
- **Items to Transfer:** All env var values, DB connection strings, third-party credentials, domain/DNS access, SSH keys

### Design Assets Package
- [ ] **Status:** NEEDS VERIFICATION
- **Action Required:**
  - Collect all logo files (PNG, SVG, ICO)
  - Export brand colors/fonts documentation
  - Collect any Figma files or design system docs
  - Package in `design-assets/` folder

### Documentation Package
- [ ] **Status:** NEEDS CREATION
- **Action Required:** Create `docs/` with: README.md, SETUP.md, DEPLOYMENT.md, API.md, DATABASE.md, ENVIRONMENT.md (‚úÖ exists), SECURITY.md

### Database Export
- [ ] **Status:** NEEDS ARRANGEMENT
- **Action Required:**
  - Export production database (if needed for migration)
  - Document database backup/restore procedure
  - Provide database access credentials

### Final Checklist
- [ ] Repository cloned with full git history
- [x] `.env.example` created and documented ‚úÖ
- [ ] All credentials transferred securely
- [ ] Design assets collected and packaged
- [ ] Documentation created and reviewed
- [ ] Database access provided
- [ ] Domain/DNS access transferred
- [ ] Third-party service accounts transferred
- [ ] Docker Hub access transferred
- [ ] Server/hosting access provided
- [ ] All secrets rotated (if needed)
- [ ] Handoff meeting scheduled (if applicable)

---

## Appendix: Quick Reference

### Service Ports
| Service | Port | Protocol |
|---------|------|----------|
| api-gateway | 8080 | HTTP |
| auth-service | 6001 | HTTP |
| product-service | 6002 | HTTP |
| order-service | 6003 | HTTP |
| seller-service | 6004 | HTTP |
| admin-service | 6005 | HTTP |
| chatting-service | 6006 | HTTP/WebSocket |
| recommendation-service | 6007 | HTTP |
| logger-service | 6008 | HTTP/WebSocket |
| user-ui | 3000 | HTTP |
| seller-ui | 3001 | HTTP |
| admin-ui | 3002 | HTTP |
| kafka | 9092 | TCP |
| zookeeper | 2181 | TCP |
| nginx | 80, 443 | HTTP/HTTPS |

### Key File Locations
- **Prisma Schema:** `prisma/schema.prisma`
- **Docker Compose:** `docker-compose.production.yml`
- **Nginx Config:** `nginx.conf`
- **Package Manager:** `pnpm` (version 9.12.3)
- **Build System:** Nx (version 20.6.1)
- **Node Version:** 20 (from Dockerfiles)

### Critical Endpoints
- **Main Site:** `https://nomadnet.shop`
- **Seller Dashboard:** `https://sellers.nomadnet.shop`
- **Admin Panel:** `https://admin.nomadnet.shop`
- **API Gateway Health:** `https://nomadnet.shop/gateway-health`
- **QPay Webhook:** `https://nomadnet.shop/payments/qpay/webhook`
- **Chat WebSocket:** `wss://nomadnet.shop/ws-chatting`

---

## Sign-Off

### Handoff Verification Table

| Category | Received | Verified |
|----------|----------|----------|
| **Source Code** | ‚òê | ‚òê |
| **Environment Variables & Keys** | ‚òê | ‚òê |
| **Database Access** | ‚òê | ‚òê |
| **Cloud/Hosting/Domains** | ‚òê | ‚òê |
| **Payment Gateways** | ‚òê | ‚òê |
| **Third-Party Services** | ‚òê | ‚òê |
| **Design & Branding** | ‚òê | ‚òê |
| **Documentation** | ‚òê | ‚òê |
| **Security Items** | ‚òê | ‚òê |

### Signatures

**Outgoing Developer:**
- Name: _________________________
- Signature: _________________________
- Date: _________________________

**G3 Global Representative:**
- Name: _________________________
- Signature: _________________________
- Date: _________________________

**INPUT OUTPUT LLC:**
- Name: _________________________
- Signature: _________________________
- Date: _________________________

---

**End of Report**

*Report generated by scanning the codebase. Findings based on code analysis. Some items need manual verification and credential transfer.*

