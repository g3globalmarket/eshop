Verifying infrastructure and UI configuration, then testing browser E2E connectivity.


[13 tools called]


Checking if `.env.local` overrides root `.env` and verifying the configuration:


[11 tools called]


Updating the audit docs with evidence:


[11 tools called]


## Summary

### Did user-ui/admin-ui call localhost:8080?

**Status:** ✅ Configured (browser verification needed)

**Actions taken:**
1. Verified env vars are set in root `.env` and `apps/user-ui/.env.local`
2. Ensured `apps/user-ui/.env.local` has `NEXT_PUBLIC_SERVER_URI=http://localhost:8080`
3. Ensured `apps/admin-ui/.env.local` has `NEXT_PUBLIC_SERVER_URI=http://localhost:8080`
4. Restarted UIs to pick up env vars
5. Verified API Gateway endpoints work via curl

**Evidence:**
- `apps/user-ui/.env.local` contains `http://localhost:8080` (verified)
- UIs restarted successfully (ports 3000, 3002 bound)
- API Gateway endpoints return 200 with expected JSON
- **Note:** Browser DevTools Network tab verification needed to confirm UI makes calls to `localhost:8080` (not production)

---

### Commands run + results

**Step 1: Infrastructure verification**
```bash
curl http://localhost:8080/gateway-health
```
**Result:** ✅ Gateway running, health check returns JSON

**Step 2: Env var verification**
```bash
node -e "require('dotenv').config(); ['NEXT_PUBLIC_SERVER_URI',...].forEach(k=>console.log(k+':',process.env[k]?'[SET]':'[NOT SET]'))"
```
**Result:** ✅ All 4 `NEXT_PUBLIC_*` vars [SET]

**Step 3: UI configuration**
```bash
# Found apps/user-ui/.env.local exists (Next.js priority)
# Ensured apps/user-ui/.env.local has NEXT_PUBLIC_SERVER_URI=http://localhost:8080
# Ensured apps/admin-ui/.env.local has NEXT_PUBLIC_SERVER_URI=http://localhost:8080
```
**Result:** ✅ Both UIs configured with localhost:8080

**Step 4: UI restart**
```bash
pnpm user-ui   # Port 3000
pnpm admin-ui # Port 3002
```
**Result:** ✅ Both UIs started, ports bound, serving HTML

**Step 5: API endpoint verification**
```bash
curl "http://localhost:8080/product/api/get-all-products?page=1&limit=5"
curl "http://localhost:8080/product/api/get-categories"
```
**Result:** ✅ Both return 200 with expected JSON
- Products: `{"products":[],"total":0,...}`
- Categories: `{"categories":["Electronics",...],"subCategories":{...}}`

**Step 6: SMTP configuration check**
**Result:** ❌ SMTP env vars not configured (required for registration/login)
- Required: `SMTP_HOST`, `SMTP_PORT`, `SMTP_SERVICE`, `SMTP_USER`, `SMTP_PASS`
- Code location: `apps/auth-service/src/utils/sendMail/index.ts`

---

### Remaining blockers (max 5)

1. Browser verification needed — Open user-ui (http://localhost:3000), DevTools → Network, verify API requests show `localhost:8080` as host
2. SMTP configuration missing — Registration/login blocked; need `SMTP_HOST`, `SMTP_PORT`, `SMTP_SERVICE`, `SMTP_USER`, `SMTP_PASS` for OTP emails
3. Order creation flow — Requires authentication and may trigger payment (needs sandbox verification)
4. QPay scripts — Not run (require sandbox verification)
5. Seller/Admin authenticated flows — Require login credentials or SMTP for registration

**Next recommended action:**
1. Open user-ui in browser (http://localhost:3000), open DevTools → Network tab, navigate to product pages, and verify API requests show `localhost:8080` as host (not production domains)
2. Configure SMTP for local testing (Gmail SMTP, Mailtrap, or local mail server) to enable registration/login flows
3. Test authenticated flows (login → product browse → cart) through UI after SMTP is configured

---

**Status:** UI → API Gateway connectivity configured. UIs restarted with correct env vars. API endpoints verified via curl. Browser DevTools verification needed to confirm UI-to-gateway connectivity. Registration/login blocked by missing SMTP configuration. Documentation updated with evidence and setup steps.