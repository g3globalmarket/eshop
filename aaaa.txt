Fixing import paths. Checking the current state and replacing incorrect imports:


[4 tools called]


Fixing import paths. Checking package configuration and replacing incorrect imports:


[3 tools called]


Checking how other packages are imported to understand the pattern:


[3 tools called]


Fixing the package entry point and replacing incorrect imports:


[10 tools called]


Adding the missing import in admin-ui:


[3 tools called]


All imports are fixed. Verifying the package structure and running builds:


[3 tools called]


Checking Next.js config and tsconfig for package resolution:


[3 tools called]


Adding the package dependency and webpack alias. Updating package.json and next.config.js:


[6 tools called]


Updating seller-ui and admin-ui:


[5 tools called]


Checking pnpm workspace configuration:


[2 tools called]


The workspace pattern `packages/utils/*` matches subdirectories, not the utils directory itself. Updating the workspace config:


[2 tools called]


Testing the builds:


[1 tool called]


Testing seller-ui and admin-ui builds:


[3 tools called]


All builds pass. Verifying imports are correct:


[2 tools called]


## Summary: CI build errors fixed

### Changes made

**1. Package configuration:**
- Updated `packages/utils/package.json`: Changed `main` from `"dist/main.js"` to `"src/index.ts"`
- Updated `pnpm-workspace.yaml`: Added `"packages/utils"` to workspace packages

**2. Import path fixes (9 files):**
- Replaced `@eshop/utils/src/currency` with `@eshop/utils` in:
  - `apps/user-ui/src/app/(routes)/cart/page.tsx`
  - `apps/user-ui/src/app/(routes)/order/[orderId]/page.tsx`
  - `apps/user-ui/src/shared/components/cards/product-details.card.tsx`
  - `apps/user-ui/src/shared/components/cards/product-card.tsx`
  - `apps/user-ui/src/shared/components/checkout/qpayCheckoutForm.tsx`
  - `apps/user-ui/src/shared/modules/product/product-details.tsx`
  - `apps/seller-ui/src/shared/components/cards/product.card.tsx`
  - `apps/seller-ui/src/app/(routes)/dashboard/payments/page.tsx`

**3. Missing import added:**
- `apps/admin-ui/src/app/dashboard/payments/page.tsx`: Added `import { formatMNT } from "@eshop/utils";`

**4. Package dependencies:**
- Added `"@eshop/utils": "workspace:*"` to:
  - `apps/user-ui/package.json`
  - `apps/seller-ui/package.json`
  - `apps/admin-ui/package.json`

**5. Webpack aliases:**
- Added `"@eshop/utils": path.resolve(__dirname, "../../packages/utils/src")` to:
  - `apps/user-ui/next.config.js`
  - `apps/seller-ui/next.config.js`
  - `apps/admin-ui/next.config.js`

### Verification

All builds pass:
- `pnpm nx build user-ui` — Success
- `pnpm nx build seller-ui` — Success
- `pnpm nx build admin-ui` — Success

No remaining references to `@eshop/utils/src/currency` found in codebase.

### Files changed (14 total)

**Package config:**
1. `packages/utils/package.json`
2. `pnpm-workspace.yaml`

**Import fixes:**
3-11. 9 files with import path corrections (listed above)

**Dependencies & config:**
12-14. 3 package.json files (user-ui, seller-ui, admin-ui)
15-17. 3 next.config.js files (user-ui, seller-ui, admin-ui)

All changes are minimal and maintain runtime behavior. The package is now properly exported and importable via `@eshop/utils`.